inmâ€¿inc â† {(+`0=â‰ Â¨ð•©)âŠ”ð•©}â€¢Flines"/dev/stdin"
p1â€¿b1â€¿w1 â† (>inm)âŠ¸=Â¨"@O#"
wall â† â‰>2/<Ë˜â‰w1
z â† âŠâ‰p1
pos â† â‰âˆ¾Â´â‰âŸœzÂ¨<Ë˜â‰p1
box â† â‰âˆ¾Â´â‰âŸœzÂ¨<Ë˜â‰b1
cmds â† "^>v<"âŠâˆ¾Â´inc
coords â† +Â´Â¨100â€¿1âŠ¸Ã—Â¨â†•â‰¢pos

Display â† {ð•Špâ€¿bâ€¿w: âŠ‘âŸœ".@[]#    "Â¨p+(2Ã—b)+(3Ã—Â»Ë˜b)+(4Ã—w)}
mv â† âŸ¨Â«,Â»Ë˜,Â»,Â«Ë˜âŸ©
boxMv â† âŸ¨{(Â«Ë˜âˆ¨âŠ¢âˆ¨Â»Ë˜)Â«ð•©}, Â»Ë˜âŸ2, {(Â«Ë˜âˆ¨âŠ¢âˆ¨Â»Ë˜)Â»ð•©}, Â«Ë˜âŸ2âŸ©
boxFstMv â† âŸ¨{(Â«Ë˜âˆ¨âŠ¢)Â«ð•©}, Â»Ë˜, {(Â«Ë˜âˆ¨âŠ¢)Â»ð•©}, Â«Ë˜âŸ2âŸ©
boxWallMv â† âŸ¨{(âŠ¢âˆ¨Â»Ë˜)Â«ð•©}, Â»Ë˜âŸ2, {(âŠ¢âˆ¨Â»Ë˜)Â»ð•©}, Â«Ë˜âŸ©
Step â† {ð•Šcmd:
  M â† cmdâ—¶Mv
  BM â† cmdâ—¶BoxMv
  BFM â† cmdâ—¶BoxFstMv
  BWM â† cmdâ—¶BoxWallMv
  p â† M pos
  b â† {ð•©âˆ¨boxâˆ§BMð•©}â€¢_while_{âˆ¨Â´â¥Šboxâˆ§(Â¬ð•©)âˆ§BMð•©}boxâˆ§BFM pos
  Â¬âˆ¨Â´â¥Š (wallâˆ§BWM b) âˆ¨ wallâˆ§p ?
    pos â†© p
    box â†© (M b)âˆ¨boxâˆ§Â¬b
    #â€¢Show cmdâˆ¾bâ‹ˆDisplay posâ€¿boxâ€¿wall
  ;@}
StepÂ¨cmds
â€¢Show +Â´â¥ŠboxÃ—coords
